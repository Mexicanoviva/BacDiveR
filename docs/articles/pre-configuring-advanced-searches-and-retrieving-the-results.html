<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pre-Configuring Advanced Searches and Retrieving the Results • BacDiveR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Pre-Configuring Advanced Searches and Retrieving the Results">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BacDiveR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/BacDive-ing-in.html">BacDive-ing in</a>
    </li>
    <li>
      <a href="../articles/adr-001-JSON-not-XML.html">ADR 1: Using JSON internally, instead of XML</a>
    </li>
    <li>
      <a href="../articles/adr-002-two-download-functions-returning-datasets.html">ADR 2: Two download functions that return full datasets by default</a>
    </li>
    <li>
      <a href="../articles/logic-checking-bacdive-datasets.html">Logic-Checking BacDive Datasets</a>
    </li>
    <li>
      <a href="../articles/pre-configuring-advanced-searches-and-retrieving-the-results.html">Pre-Configuring Advanced Searches and Retrieving the Results</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TIBHannover/BacDiveR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Pre-Configuring Advanced Searches and Retrieving the Results</h1>
                        <h4 class="author">Katrin Leinweber</h4>
            
            <h4 class="date">2018-12-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/TIBHannover/BacDiveR/blob/master/vignettes/pre-configuring-advanced-searches-and-retrieving-the-results.Rmd"><code>vignettes/pre-configuring-advanced-searches-and-retrieving-the-results.Rmd</code></a></small>
      <div class="hidden name"><code>pre-configuring-advanced-searches-and-retrieving-the-results.Rmd</code></div>

    </div>

    
    
<p>Unfortunately, the BacDive Web Service does not allow SQL-like queries for the content of specific fields within the strain’s datasets. If you find the functionality explained in <a href="https://tibhannover.github.io/BacDiveR/articles/BacDive-ing-in.html">BacDive-ing in</a> too limited, please try the following, semi-automatic approach to using BacDiveR.</p>
<ol style="list-style-type: decimal">
<li>Visit <a href="https://bacdive.dsmz.de/advsearch">BacDive.DSMZ.de/AdvSearch</a> and prepare your search in that web interface. It enables SQL-like searches against the ca. 135 of BacDive’s accessible data fields.</li>
</ol>
<div class="figure">
<img src="advanced-search.png" alt="Overview of the possible fields to query and their parameters (contains, exact, begins/ends with)"><p class="caption">Overview of the possible fields to query and their parameters (contains, exact, begins/ends with)</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Run your advanced search (query). The example below searches for all strains that type a plant pathogenic species. <strong>Note the</strong> results list with the “hits” on the right, and the now much longer <strong>URL</strong>. It contains/encodes all the terms and parameters of your advanced search.</li>
</ol>
<p><a href="https://bacdive.dsmz.de/advsearch?advsearch=search&amp;site=advsearch&amp;searchparams%5B5%5D%5Bsearchterm%5D=1&amp;searchparams%5B156%5D%5Bsearchterm%5D=&amp;searchparams%5B158%5D%5Bsearchterm%5D=1"><img src="advanced-search-plant-pathogens.png" alt="Advanced search results"></a></p>
<ol start="3" style="list-style-type: decimal">
<li><p>Copy the URL of the results page from your browser’s address bar. Alternatively, copy it from the “Download list of BacDive Ids” link to the top right of the “hits” list.</p></li>
<li><p>Paste the copied URL into a call to the <code>data &lt;- retrieve_search_results("…")</code> function.</p></li>
<li><p>Enjoy the list of downloaded datasets, just as you would after using <code>data &lt;- retrieve_data(searchTerm = ..., searchType = ...)</code>.</p></li>
</ol>
<div id="mass-downloading-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#mass-downloading-datasets" class="anchor"></a>Mass-downloading datasets</h2>
<p><code>retrieve_data(searchTerm = …, searchType = "taxon")</code> can be used to download all datasets for the genus or a specific species given in <code>…</code>. Broader searches are possible through the <a href="https://bacdive.dsmz.de/advsearch?advsearch=search&amp;site=advsearch&amp;searchparams%5B70%5D%5Bcontenttype%5D=text&amp;searchparams%5B70%5D%5Btypecontent%5D=contains&amp;searchparams%5B70%5D%5Bsearchterm%5D=archaea">advanced search, for example for all Archaea</a>:</p>
<p><code>Archaea_data &lt;- retrieve_search_results("https://bacdive.dsmz.de/advsearch?advsearch=search&amp;site=advsearch&amp;searchparams%5B70%5D%5Bcontenttype%5D=text&amp;searchparams%5B70%5D%5Btypecontent%5D=contains&amp;searchparams%5B70%5D%5Bsearchterm%5D=archaea")</code></p>
<p>Please note the messages about estimated download times for such large downloads.</p>
</div>
<div id="storing-datasets-offline" class="section level2">
<h2 class="hasAnchor">
<a href="#storing-datasets-offline" class="anchor"></a>Storing datasets offline</h2>
<p>This is not a BacDiveR feature, but <code>base</code> R’s <code><a href="https://www.rdocumentation.org/packages/base/topics/readRDS">saveRDS()</a></code> is particularly useful for offline-storage of lots of search results, because downloading them would take rather long. Continuing the Archaea example, the following code writes the dataset to a file, loads it again, and verifies the data integrity:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/readRDS">saveRDS</a></span>(Archaea_data, <span class="st">"Archaea.rds"</span>, <span class="dt">version =</span> <span class="dv">3</span>)
Archaea_data_stored &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/readRDS">readRDS</a></span>(<span class="st">"Archaea.rds"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/identical">identical</a></span>(Archaea_data, Archaea_data_stored)</code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#mass-downloading-datasets">Mass-downloading datasets</a></li>
      <li><a href="#storing-datasets-offline">Storing datasets offline</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Katrin Leinweber.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
